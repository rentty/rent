<!DOCTYPE html>
<html>
<head>
    <title>houseMyself</title>
    <link rel="stylesheet" href="https://cache.amap.com/lbs/static/main1119.css"/>
    <!--<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">-->
    <link rel="stylesheet" href="element-ui/lib/theme-chalk/index.css">
    <style type="text/css">
        .services{
            position: absolute;
            left: 10%;
            width: 80%;
        }
        .el-menu-vertical-demo{


        }
        .single-left{
            height: 1000px;
            /* border-left: 1px;
             border-left: solid;
             border-left: #82848a;*/
        }
        .single-right{
            position: absolute;
            left: 50px;
            text-align: center;
        }
        .el-col{
            width: 100%;
            height: 100%;
        }
        .el-menu{
            width: 100%;
            height: 100%;
        }
        .el-menu-item{

            width: 100%;
        }
        .el-alert{
            width: 680px;
        }
        .msg1{
            position: absolute;
            left: 35%;
            width: 30%;
            top: 130px;
        }
        .msg2{
            position: absolute;
            left: 35%;
            width: 30%;
            top: 180px;
        }
        .img{
            text-align: center;
        }
        .btnGro{
            position: absolute;
            left: 35%;
            width: 30%;
            top: 240px;
        }
    </style>
    <script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=5c11ae578c1dcee5ca73646f3c6c7fb7&plugin=AMap.DistrictSearch"></script>
    <script type="text/javascript" src="https://cache.amap.com/lbs/static/addToolbar.js"></script>
    <!-- for-mobile-apps -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="" />

    <!--<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false);
    function hideURLbar(){ window.scrollTo(0,1); } </script>-->
    <!-- //for-mobile-apps -->
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/light-carousel.css" rel="stylesheet" type="text/css">
    <link href="css/calendar.css" rel="stylesheet" type="text/css">
    <!-- js -->
    <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
    <!--vue-->
    <!--<script  src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>-->
    <!--axios-->
    <!--<script src="https://unpkg.com/axios/dist/axios.min.js"></script>-->

    <script src="js/calendar.js"></script>

    <!-- //js -->
    <link href='http://fonts.useso.com/css?family=Quicksand:400,300,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.useso.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic' rel='stylesheet' type='text/css'>
    <!-- start-smoth-scrolling -->
    <script type="text/javascript" src="js/move-top.js"></script>
    <script type="text/javascript" src="js/easing.js"></script>
    <script type="text/javascript">
        /*jQuery(document).ready(function($) {
            $(".scroll").click(function(event){
                event.preventDefault();
                $('html,body').animate({scrollTop:$(this.hash).offset().top},1000);
            });
        });*/
    </script>
    <!-- start-smoth-scrolling -->
    <script>
        $(function () {
            var hsId = Getparam("hsId");
            console.log(hsId);
            function Getparam(str) {

                var ref = window.location.search.split("=")[1];
                return ref;
            }

        });
    </script>
</head>

<body>
<script src="js\vue.min.js"></script>
<!--<script src="https://unpkg.com/element-ui/lib/index.js"></script>-->
<script src="element-ui/lib/index.js"></script>
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<!-- header -->
<div class="header">
    <div class="header-top">
        <div class="container">
            <div class="header-top-left">
                <ul>
                    <li><span class="glyphicon glyphicon-earphone" aria-hidden="true"></span>13556506447</li>
                    <li><a href="mailto:1426413088@qq.com"><span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>@YQ</a></li>
                </ul>
            </div>
            <div class="header-top-left1">
                <!--右侧上图标-->
                <ul class="social-icons">
                    <li><a href="short-codes.html" class="glyphicon glyphicon-log-in" style="color: rgb(255,255,255)">   Login</a></li>

                </ul>
            </div>
            <div class="header-top-right">

            </div>
            <div class="clearfix"> </div>
        </div>
    </div>
    <div class="header-bottom">
        <div class="container">
            <nav class="navbar navbar-default">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <div class="logo">
                        <h1><a class="navbar-brand" href="index.html">Rent </a></h1>
                    </div>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse nav-wil" id="bs-example-navbar-collapse-1">
                    <nav>
                        <ul class="nav navbar-nav">
                            <li><a href="base.html" class="hvr-bounce-to-bottom">首页</a></li>
                            <li><a href="services.html" class="hvr-bounce-to-bottom">找房</a></li>
                            <li><a href="searchByMap.html" class="hvr-bounce-to-bottom">地图找房</a></li>
                        </ul>
                    </nav>
                </div>
                <!-- /.navbar-collapse -->
            </nav>
        </div>
    </div>

</div>
<!-- //header -->
<!-- breadcrumbs -->
<div class="services-top-breadcrumbs">
    <div class="container">
        <div class="services-top-breadcrumbs-right">
            <ul>
                <li><a href="addHouse.html">房屋管理</a> <i>/</i></li>
                <li>添加房屋</li>
            </ul>
        </div>
    </div>
</div>
<div class="services" id="app">
    <div class="container"  >
        <div class="col-md-3 single-left">
            <el-col :span="12" >
                <el-menu
                        class="el-menu-vertical-demo"
                        default-active="0-1">
                    <!--:collapse="isCollapse"-->
                    <el-submenu index="0">
                        <template slot="title">
                            <i class="el-icon-location"></i>
                            <span>个人管理</span>
                        </template>
                        <el-menu-item-group>
                            <el-menu-item index="0-1" @click="">个人信息</el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                    <el-submenu index="1">
                        <template slot="title">
                            <i class="el-icon-location"></i>
                            <span>房屋管理</span>
                        </template>
                        <el-menu-item-group>
                            <el-menu-item index="1-1" @click="ToAdd">添加房屋</el-menu-item>
                            <el-menu-item index="1-2" @click="ToMana">管理房屋</el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                    <el-submenu index="2">
                        <template slot="title">
                            <i class="el-icon-location"></i>
                            <span>订单管理</span>
                        </template>
                        <el-menu-item-group>
                            <el-menu-item index="2-1" @click="ToOrder">查看订单</el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                </el-menu>

            </el-col>
        </div>
        <div class="col-md-8 single-right">
            <div class="img" >
                <el-avatar :size="100" :src="circleUrl"></el-avatar>
            </div>
            <div class="msg1" >
                <label>{{name}}</label>
            </div>
            <div class="msg2" >
                <label>{{type}}</label>
            </div>
            <div class="btnGro" >
                <el-button type="primary" icon="el-icon-edit" @click="editMine()">修改个人信息</el-button>
                <el-button type="primary" icon="el-icon-edit" @click="editMine()">修改个人信息</el-button>
            </div>
        </div>

    </div>
    <!-- 修改 -->
    <el-dialog title="修改个人信息" :visible.sync="dialogFormVisible">
        <el-form :model="form">
            <el-form-item label="编号" :label-width="formLabelWidth">
                <el-input v-model="form.uifId" autocomplete="off" disabled></el-input>
            </el-form-item>
            <el-form-item label="昵称" :label-width="formLabelWidth">
                <el-input v-model="form.uifNickname" ></el-input>
            </el-form-item>
            <el-form-item label="手机号" :label-width="formLabelWidth">
                <el-input v-model="form.uifPhone" type="textarea" ></el-input>
            </el-form-item>
        </el-form>
        <div slot="footer" class="dialog-footer">
            <el-button @click="dialogFormVisible = false">取 消</el-button>
            <el-button type="primary" @click="updateUser()">确 定</el-button>
        </div>
    </el-dialog>
</div>
<br>
<br>

<script src="js/bootstrap.js"></script>
<script>

</script>

<script>
    var districtStr = "0" ;
    var vue =  new Vue({
        el: '#app',
        data: function() {

            return{
                //
                dialogFormVisible : false,
                formLabelWidth: '120px',
                circleUrl:'',
                /*size:'10000cm',*/
                name:'',
                type:'',
                id:'',
                form : {
                    uifId : '',
                    uifNickname : '',
                    uifPhone : ''
                },
            }
        },
        methods:{
            ToAdd(){
                window.location.href = 'addHouse.html?id='+this.id;
            },
            ToMana(){
                window.location.href = 'houseManag.html?id='+this.id;
            },
            ToOrder(){
                window.location.href = 'order.html?id='+this.id;
            },
            editMine(){
                this.dialogFormVisible = true;
                this.form.uifId = myData.data.user.uifId;
                this.form.uifNickname = myData.data.user.uifNickname;
                this.form.uifPhone = myData.data.user.uifPhone;
            },
            updateUser(){
                $.ajax({
                    type : 'Post',
                    url : "http://localhost:8080/admin/user/updateMine",
                    data : {
                        uifId:this.form.uifId,
                        uifNickname:this.form.uifNickname,
                        uifPhone:this.form.uifPhone,
                    },
                    success : function(data){
                        //alert("success");
                        vue.dialogFormVisible = false;
                        vue.$notify({
                            title: '成功',
                            message: '个人信息修改成功',
                            type: 'success'
                        });
                    },
                    error : function(){
                        alert("error");
                    }
                });
            },
        },
        watch: {
        },
    })
</script>
<script>
    var myData;
    vue.id = window.location.search.split("=")[1];
    $.ajax({
        url: 'http://localhost:8080/admin/user/getUserById',//地址
        data: {
            id: window.location.search.split("=")[1],
        },
        dataType: "json",
        type: 'GET',//类型
        success: function (data) {
            console.log(data)
            myData = data;
            vue.circleUrl = myData.data.user.uifAvatar;
            vue.name = myData.data.user.uifNickname;
            vue.type = myData.data.user.uifUsertype == 0?"普通用户":"户主";
        }
    })
</script>
</body>
</html>